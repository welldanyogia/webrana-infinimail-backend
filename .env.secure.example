# =============================================================================
# WEBRANA INFINIMAIL - SECURE CONFIGURATION TEMPLATE
# =============================================================================
# SECURITY NOTICE:
# - NEVER commit .env files to version control
# - Generate all secrets using cryptographically secure random generators
# - Use different values for development, staging, and production
# =============================================================================

# -----------------------------------------------------------------------------
# ENVIRONMENT
# -----------------------------------------------------------------------------
ENV=production
# Values: development, staging, production

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# -----------------------------------------------------------------------------
# Generate password: openssl rand -base64 32
# IMPORTANT: Use sslmode=verify-full in production
DATABASE_URL=postgres://infinimail:CHANGE_THIS_STRONG_PASSWORD@localhost:5432/infinimail?sslmode=verify-full

# Connection pool settings (optional, defaults are usually fine)
# DB_MAX_OPEN_CONNS=25
# DB_MAX_IDLE_CONNS=5
# DB_CONN_MAX_LIFETIME=5m

# -----------------------------------------------------------------------------
# API SERVER CONFIGURATION
# -----------------------------------------------------------------------------
API_PORT=8080

# Generate API key: openssl rand -hex 32
# Minimum 32 characters required
API_KEY=your_64_character_hex_api_key_generated_with_openssl_rand_hex_32

# Allowed origins for CORS (comma-separated)
# NEVER use * in production
ALLOWED_ORIGINS=https://yourdomain.com,https://app.yourdomain.com

# -----------------------------------------------------------------------------
# SMTP SERVER CONFIGURATION
# -----------------------------------------------------------------------------
SMTP_PORT=2525
SMTP_DOMAIN=mail.yourdomain.com

# TLS Configuration (recommended for production)
SMTP_TLS_ENABLED=true
SMTP_CERT_FILE=/etc/ssl/certs/smtp.crt
SMTP_KEY_FILE=/etc/ssl/private/smtp.key

# SMTP Limits
SMTP_MAX_MESSAGE_SIZE=26214400
# 25 MB in bytes
SMTP_MAX_RECIPIENTS=50

# -----------------------------------------------------------------------------
# FILE STORAGE CONFIGURATION
# -----------------------------------------------------------------------------
ATTACHMENT_STORAGE_PATH=/var/lib/infinimail/attachments

# Maximum attachment size (bytes)
MAX_ATTACHMENT_SIZE=26214400

# Allowed file types (comma-separated MIME types)
# ALLOWED_FILE_TYPES=application/pdf,image/jpeg,image/png,image/gif,text/plain

# -----------------------------------------------------------------------------
# SECURITY CONFIGURATION
# -----------------------------------------------------------------------------
# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
# Requests per window
RATE_LIMIT_WINDOW=1m
# Time window (e.g., 1m, 1h)

# Auto-provisioning (creates mailboxes automatically when receiving mail)
AUTO_PROVISIONING_ENABLED=true

# Session/JWT settings (if implementing user authentication)
# SESSION_SECRET=generate_with_openssl_rand_base64_64
# JWT_SECRET=generate_with_openssl_rand_base64_64
# JWT_EXPIRY=24h

# -----------------------------------------------------------------------------
# LOGGING CONFIGURATION
# -----------------------------------------------------------------------------
LOG_LEVEL=info
# Values: debug, info, warn, error
LOG_FORMAT=json
# Values: json, text

# Security audit log (optional)
# SECURITY_LOG_PATH=/var/log/infinimail/security.log

# -----------------------------------------------------------------------------
# MONITORING (Optional)
# -----------------------------------------------------------------------------
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
# OTEL_SERVICE_NAME=infinimail-backend

# -----------------------------------------------------------------------------
# DEVELOPMENT ONLY - DO NOT USE IN PRODUCTION
# -----------------------------------------------------------------------------
# Uncomment these only for local development
# ENV=development
# DATABASE_URL=postgres://infinimail:infinimail@localhost:5432/infinimail?sslmode=disable
# ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173
# SMTP_TLS_ENABLED=false
# RATE_LIMIT_ENABLED=false
